const g=(t=document)=>{const o="Last Published:";for(const s of t.childNodes)if(s.nodeType===Node.COMMENT_NODE&&s.textContent?.includes(o)){const n=s.textContent.trim().split(o)[1];if(n)return new Date(n)}};function y(t){const o=new Map,s=document.styleSheets[0];if(!s)return o;const n=new Map;try{const c=s.cssRules||s.rules;for(const e of t){const a={};if(o.set(e,a),!e.classList.length)continue;const r=e.classList[0];if(n.has(r)){o.set(e,{...n.get(r)});continue}for(let i=0;i<c.length;i++){const l=c[i];if(l instanceof CSSStyleRule&&l.selectorText===`.${r}`){const d=l.style;for(let f=0;f<d.length;f++){const u=d[f];if(u.startsWith("--")){const h=d.getPropertyValue(u).trim();h&&(a[u]=h)}}n.set(r,{...a});break}}}}catch(c){console.warn("Could not access stylesheet rules:",c)}return o}const w="webflow-variable-modes-cache";window.wfVarModes={data:null,isReady:!1,onReady(t){this.isReady&&this.data?setTimeout(()=>t(this.data),0):window.addEventListener("wfVarModesReady",()=>t(this.data))}};const m=()=>{const t=g(),o=t?.toISOString()||"";try{const e=localStorage.getItem(w);if(e&&t){const a=JSON.parse(e);if(a.publishDate===o)return console.log("Using cached variable modes from",o),a.data}}catch(e){console.warn("Error accessing localStorage cache:",e)}console.log("Calculating fresh variable modes data");const s=Array.from(document.querySelectorAll("[data-variable-mode]")),n=y(s),c={};for(const e of s){const a=e.dataset.variableMode;if(!a)continue;const r=n.get(e);r&&(c[a]=r)}if(t)try{const e={publishDate:o,data:c};localStorage.setItem(w,JSON.stringify(e))}catch(e){console.warn("Error caching variable modes:",e)}return c},b=()=>{const t=m();window.wfVarModes.data=t,window.wfVarModes.isReady=!0,window.dispatchEvent(new CustomEvent("wfVarModesReady")),console.log("WF Variable Modes ready:",t)};b();
