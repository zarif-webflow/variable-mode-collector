const m=(e=document)=>{const o="Last Published:";for(const a of e.childNodes)if(a.nodeType===Node.COMMENT_NODE&&a.textContent?.includes(o)){const s=a.textContent.trim().split(o)[1];if(s)return new Date(s)}};async function b(e){const o=new Map,a=document.styleSheets[0];if(!a||!a.href)return o;const s=new Map;try{const n=a.href,t=await fetch(n);if(!t.ok)throw new Error(`Failed to fetch stylesheet: ${t.status} ${t.statusText}`);const c=await t.text(),i=/\.([^\s{,:]+)\s*{([^}]*)}/g;let f;for(;(f=i.exec(c))!==null;){const r=f[1],l=f[2];if(!r||!l)continue;const d=/(--[^:]+):\s*([^;]+);/g;let w;const h={};for(;(w=d.exec(l))!==null;){const g=w[1].trim(),y=w[2].trim();h[g]=y}Object.keys(h).length>0&&s.set(r,h)}for(const r of e){const l={};if(o.set(r,l),!r.classList.length)continue;const d=r.classList[0];s.has(d)&&o.set(r,{...s.get(d)})}}catch(n){console.warn("Error fetching or parsing stylesheet:",n)}return o}const u="webflow-variable-modes-cache";window.wfVarModes={data:null,isReady:!1,onReady(e){this.isReady&&this.data?setTimeout(()=>e(this.data),0):window.addEventListener("wfVarModesReady",()=>e(this.data))}};const M=async()=>{const e=m(),o=e?.toISOString()||"";try{const t=localStorage.getItem(u);if(t&&e){const c=JSON.parse(t);if(c.publishDate===o)return console.log("Using cached variable modes from",o),c.data}}catch(t){console.warn("Error accessing localStorage cache:",t)}console.log("Calculating fresh variable modes data");const a=Array.from(document.querySelectorAll("[data-variable-mode]")),s=await b(a),n={};for(const t of a){const c=t.dataset.variableMode;if(!c)continue;const i=s.get(t);i&&(n[c]=i)}if(e)try{const t={publishDate:o,data:n};localStorage.setItem(u,JSON.stringify(t))}catch(t){console.warn("Error caching variable modes:",t)}return n},p=async()=>{const e=await M();window.wfVarModes.data=e,window.wfVarModes.isReady=!0,window.dispatchEvent(new CustomEvent("wfVarModesReady")),console.log("WF Variable Modes ready:",e)};(async()=>await p())();
