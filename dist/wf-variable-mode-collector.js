var m=(r=document)=>{let s="Last Published:";for(let e of r.childNodes)if(e.nodeType===Node.COMMENT_NODE&&e.textContent?.includes(s)){let n=e.textContent.trim().split(s)[1];if(n)return new Date(n)}};var f=({selector:r,parent:s,log:e="debug"})=>{let n=Array.from((s||document).querySelectorAll(r));return n.length===0?(e===!1||(e==="debug"?console.debug:console.error)(`${e.toUpperCase()}: No elements found with selector "${r}" in ${s!==void 0?"the specified parent element:":"the document."}`,s),null):n};var p="webflow-variable-modes-cache";function b(r){let s=new Blob([`(${r.toString()})()`],{type:"application/javascript"}),e=URL.createObjectURL(s),n=new Worker(e);return URL.revokeObjectURL(e),n}function M(){self.addEventListener("message",async r=>{let s=r.data;if(s.type==="fetchStylesheet")try{let e=await fetch(s.url);if(!e.ok)throw new Error(`Failed to fetch stylesheet: ${e.status} ${e.statusText}`);let n=await e.text(),a=/\.([^\s{,:]+)\s*{([^}]*)}/g,t={},o;for(;(o=a.exec(n))!==null;){let l=o[1],c=o[2];if(!l||!c)continue;let i=/(--[^:]+):\s*([^;]+);/g,d,u={};for(;(d=i.exec(c))!==null;){let h=d[1].trim(),g=d[2].trim();u[h]=g}Object.keys(u).length>0&&(t[l]=u)}self.postMessage({type:"stylesheetProcessed",classRulesMap:t})}catch(e){self.postMessage({type:"stylesheetProcessed",classRulesMap:{},error:e instanceof Error?e.message:String(e)})}})}async function w(r){let s=new Map,e=document.styleSheets[0];if(!e||!e.href)return s;let n=new Map;for(let t of r){if(!t.classList.length){s.set(t,{});continue}let o=t.classList[0];n.has(o)||n.set(o,[]),n.get(o).push(t)}let a=b(M);try{let t=await new Promise((o,l)=>{a.onmessage=c=>{let i=c.data;i.type==="stylesheetProcessed"&&(i.error?l(new Error(i.error)):o(i.classRulesMap))},a.onerror=c=>{l(new Error(`Worker error: ${c.message}`))},a.postMessage({type:"fetchStylesheet",url:e.href})});for(let[o,l]of n.entries()){let c=t[o]||{};for(let i of l)s.set(i,{...c})}}catch(t){console.error("Error in worker processing:",t)}finally{a.terminate()}return s}var y=async()=>{let r=m(),s=r?.toISOString()||"";try{let t=localStorage.getItem(p)||null;if(t&&r){let o=JSON.parse(t);if(o.publishDate===s)return console.debug("Using cached variable modes from",s),o.data}}catch(t){console.error("Error accessing localStorage cache:",t)}console.debug("Calculating fresh variable modes data");let e=f({selector:"[data-variable-mode]"});if(!e)return null;let n=await w(e),a={};for(let t of e){let o=t.dataset.variableMode;if(!o)continue;let l=n.get(t);l&&(a[o]=l)}if(r)try{let t={publishDate:s,data:a};localStorage.setItem(p,JSON.stringify(t))}catch(t){console.error("Error caching variable modes:",t)}return a};window.wfVarModes={data:null,isReady:!1};var E=async()=>{let r=await y();if(!r){console.error("No injected variable modes found with [data-variable-mode] or extraction failed.");return}window.wfVarModes&&(window.wfVarModes.data=r,window.wfVarModes.isReady=!0,window.dispatchEvent(new CustomEvent("wfVarModesReady",{detail:{data:r}})),console.debug("WF Variable Modes ready:",r))};(async()=>await E())();
