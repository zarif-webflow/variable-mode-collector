import{a as h,b as g}from"./chunks/chunk-46WPTPZI.js";var u="webflow-variable-modes-cache";function p(r){let a=new Blob([`(${r.toString()})()`],{type:"application/javascript"}),t=URL.createObjectURL(a),o=new Worker(t);return URL.revokeObjectURL(t),o}function y(){self.addEventListener("message",async r=>{let a=r.data;if(a.type==="fetchStylesheet")try{let t=await fetch(a.url);if(!t.ok)throw new Error(`Failed to fetch stylesheet: ${t.status} ${t.statusText}`);let o=await t.text(),n=/\.([^\s{,:]+)\s*{([^}]*)}/g,e={},s;for(;(s=n.exec(o))!==null;){let c=s[1],i=s[2];if(!c||!i)continue;let l=/(--[^:]+):\s*([^;]+);/g,d,f={};for(;(d=l.exec(i))!==null;){let m=d[1].trim(),b=d[2].trim();f[m]=b}Object.keys(f).length>0&&(e[c]=f)}self.postMessage({type:"stylesheetProcessed",classRulesMap:e})}catch(t){self.postMessage({type:"stylesheetProcessed",classRulesMap:{},error:t instanceof Error?t.message:String(t)})}})}async function M(r){let a=new Map,t=document.styleSheets[0];if(!t||!t.href)return a;let o=new Map;for(let e of r){if(!e.classList.length){a.set(e,{});continue}let s=e.classList[0];o.has(s)||o.set(s,[]),o.get(s).push(e)}let n=p(y);try{let e=await new Promise((s,c)=>{n.onmessage=i=>{let l=i.data;l.type==="stylesheetProcessed"&&(l.error?c(new Error(l.error)):s(l.classRulesMap))},n.onerror=i=>{c(new Error(`Worker error: ${i.message}`))},n.postMessage({type:"fetchStylesheet",url:t.href})});for(let[s,c]of o.entries()){let i=e[s]||{};for(let l of c)a.set(l,{...i})}}catch(e){console.error("Error in worker processing:",e)}finally{n.terminate()}return a}var w=async()=>{let r=h(),a=r?.toISOString()||"";try{let e=localStorage.getItem(u)||null;if(e&&r){let s=JSON.parse(e);if(s.publishDate===a)return console.debug("Using cached variable modes from",a),s.data}}catch(e){console.error("Error accessing localStorage cache:",e)}console.debug("Calculating fresh variable modes data");let t=g({selector:"[data-variable-mode]"});if(!t)return null;let o=await M(t),n={};for(let e of t){let s=e.dataset.variableMode;if(!s)continue;let c=o.get(e);c&&(n[s]=c)}if(r)try{let e={publishDate:a,data:n};localStorage.setItem(u,JSON.stringify(e))}catch(e){console.error("Error caching variable modes:",e)}return n};window.wfVarModes={data:null,isReady:!1,onReady(r){this.isReady&&this.data?setTimeout(()=>r(this.data),0):window.addEventListener("wfVarModesReady",()=>r(this.data))}};var R=async()=>{let r=await w();if(!r){console.error("No injected variable modes found with [data-variable-mode] or extraction failed.");return}window.wfVarModes.data=r,window.wfVarModes.isReady=!0,window.dispatchEvent(new CustomEvent("wfVarModesReady")),console.debug("WF Variable Modes ready:",r)};(async()=>await R())();
